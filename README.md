# Flask-сервис для обработки отчётов по студенческим IT-проектам


## Входные данные
GET-запрос на `/data` с параметром `url`:
- `url` (обязательный): URL-адрес документа, который нужно обработать.


## Возвращаемые данные
Ответ в формате JSON содержит следующую информацию:
- **ключевые слова (keywords)**: слова или фразы, которые являются наиболее важными для всего текста и передают его основную тематику.
- **участники проекта (students)**: список имен студентов, участвующих в проекте.
- **научный руководитель (leaders)**: список имен научных руководителей.
- **выполненные задачи (tasks)**: список задач, выполненных в рамках проекта.
- **использованные технологии (technologies)**: список технологий, использованных в проекте.
- **аннотация (annotation_sentences)**: краткое изложение текста документа.


## Описание Python пакета
Пакет document_processing содержит все необходимые методы и модели для обработки документа отчета.

### Основные функции и модели
- get_title_page_text: Извлекает текст титульного листа и удаляет его части, соответствующие ключевым словам окончания титульного листа.
- title_page_preprocessing: Выполняет предобработку текста титульного листа, удаляя ненужные символы, числа, нормализуя текст и удаляя повторяющиеся пробелы.
- get_group_names: Извлекает имена и фамилии студентов и преподавателей из текста, используя стоп-слова и логические предположения о структуре текста.
- text_preprocessing: Осуществляет обработку текста, заменяя и удаляя определенные символы.
- line_splitter: Разбивает текст на строки и удаляет пустые строки.
- chapter_selector: Выбирает содержимое конкретной главы по ее номеру, исключая введение и заключение.
- lines_to_sentences_tokenization: Преобразует строки в предложения.
- df_sentences_preprocessing: Удаляет из предложений таблицы ненужные символы и числа, а также строки, не содержащие букв.
- introduction_selector: Отбирает строки для введения.
- conclusion_selector: Отбирает строки для заключения.
- summarize_sumy: Создает краткое изложение текста, используя алгоритмы суммаризации, такие как Sumy TextRank.
- dock_processing: Главная функция для обработки документа. Выполняет загрузку моделей из models.py, извлечение информации о студентах и преподавателях, задачах, технологиях, аннотации и ключевых словах. Возвращает результат в формате JSON.

### Детали обработки документа

1. Загрузка необходимых моделей и данных:

   - Загружаются предварительно обученные модели и словари: векторизатор для задач (task_vectorizer), классификатор для задач (task_classifier), список стоп-слов на русском языке (stopwords), экстрактор названий технологий (ru_core_news_technologies_md).

2. Извлечение информации о студентах и преподавателях:

   - Текст из файла формата .docx преобразуется в текстовый формат.
   - Функции для извлечения текста титульного листа, предварительной обработки и извлечения именованных сущностей (ФИО) студентов и научных руководителей из титульного листа.

3. Извлечение информации о задачах:

   - Предобработка текста документа.
   - Выделение содержимого главы, где располагается информация о задачах.
   - Разбивка текста на предложения и предобработка для классификации предложений.
   - Классификация предложений с помощью модели task_classifier и отбор предложений, содержащих задачи.

4. Извлечение информации о технологиях из задач:

   - Использование дообученной на категории “TECHNOLOGY” ner модели из библиотеки spaCy для извлечения сущностей, относящихся к технологиям, из текста задач.

5. Извлечение аннотации:

   - Выделение введения и заключения из текста, исключая определенные строки, связанные с иллюстрациями, датами, навыками и т.д.
   - Объединение строк в текст и суммаризация с использованием алгоритма TextRankSummarizer из библиотеки Sumy.

6. Извлечение ключевых слов из аннотации:

   - Объединение предложений аннотации и извлечение ключевых слов с помощью библиотеки Yake.

7. Упаковка данных:

   - Сбор информации о студентах, преподавателях, задачах, технологиях, аннотации и ключевых словах в формат JSON.
   - Сериализация словаря с данными в формат JSON с декодированием символов.


## Установка

1. Убедитесь, что у вас установлен Python версии 3.9.13:
   ```bash
    cd "C:\Users\<username>\AppData\Local\Programs\Python\Python39"
    python --version
    ```
2. Перейдите к папке для хранения проектов (добавьте ваш путь до папки с проектами):
   ```bash
    cd "C:\Users\<username>\<PythonProjects>"
    ```
3. Склонируйте репозиторий на локальную машину (добавьте ваше название папки для проекта):
    ```bash
    git clone -b flask_service_nlp https://gitlab.com/Pavel_Demukhametov/projecthub "<Project>"
    ```
4. Перейдите к папке с клонированным проектом:
   ```bash
    cd "<Project>"
    ```
5. Создайте виртуального окружения с версией Python 3.9.13
   ```bash
    "C:\Users\<username>\AppData\Local\Programs\Python\Python39\python.exe" -m venv "myenv"
    ```
6. Активируйте виртуальное окружение:
   ```bash
   "myenv"\Scripts\activate
   ```
7. Установите зависимости из requirements.txt:
   ```bash
    pip install -r requirements.txt
    ```
8. Инициализация необходимых пакетов:

   ```bash
    python initialize.py
    ```
    
9. Запуск приложения
   ```bash
    python app.py
    ```